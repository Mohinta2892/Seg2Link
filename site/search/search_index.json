{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Welcome to Seg2Link Seg2Link is a program designed to semi-automatically segment 3D EM images. It takes an inaccurate deep learning cell/non-cell prediction as input and assists users in quickly transforming the prediction into accurate cell segmentation. Install Seg2Link Segment cells with Seg2Link Frequently asked questions Repository in GitHub","title":"Home"},{"location":"#welcome-to-seg2link","text":"Seg2Link is a program designed to semi-automatically segment 3D EM images. It takes an inaccurate deep learning cell/non-cell prediction as input and assists users in quickly transforming the prediction into accurate cell segmentation. Install Seg2Link Segment cells with Seg2Link Frequently asked questions Repository in GitHub","title":"Welcome to Seg2Link"},{"location":"FAQ/","text":"Frequently asked questions Q1: Is Seg2Link compatible with Windows/macOS/Linux? A1: Yes. Seg2Link can be used in any of these three operating systems, though their appearance in each differs slightly. Q2: The software crashes when I press a hotkey more than once. Why? A2: Requesting a new operation before the previous one has finished can cause the program to crash. Please wait until the previous instruction is completed. Q3: The layout of the main window is incorrect. Why? A3: One possible reason is that your monitor's resolution is insufficient. We recommend that users use a monitor with at least 1920 x 1080 resolution. The scale function in Windows could also cause problems. Try to modify or stop it to get an acceptable appearance. Q4: How to prepare a cell/non-cell image A4: You can train a deep neural network to predict cell/non-cell regions using either commercial software or a free program. You can also try the program we wrote for training and prediction with 2D U-Net . Q5: Do I need a GPU to use Seg2Link? A5: No, the core functions of Seg2Link are realized using numpy and numpy-based libraries, which rely solely on the CPU. However, keep in mind that in order to train a deep neural network to predict cell/non-cell regions, you may require a GPU PC or free GPU resources from sites like Google Colab.","title":"FAQ"},{"location":"FAQ/#frequently-asked-questions","text":"Q1: Is Seg2Link compatible with Windows/macOS/Linux? A1: Yes. Seg2Link can be used in any of these three operating systems, though their appearance in each differs slightly. Q2: The software crashes when I press a hotkey more than once. Why? A2: Requesting a new operation before the previous one has finished can cause the program to crash. Please wait until the previous instruction is completed. Q3: The layout of the main window is incorrect. Why? A3: One possible reason is that your monitor's resolution is insufficient. We recommend that users use a monitor with at least 1920 x 1080 resolution. The scale function in Windows could also cause problems. Try to modify or stop it to get an acceptable appearance. Q4: How to prepare a cell/non-cell image A4: You can train a deep neural network to predict cell/non-cell regions using either commercial software or a free program. You can also try the program we wrote for training and prediction with 2D U-Net . Q5: Do I need a GPU to use Seg2Link? A5: No, the core functions of Seg2Link are realized using numpy and numpy-based libraries, which rely solely on the CPU. However, keep in mind that in order to train a deep neural network to predict cell/non-cell regions, you may require a GPU PC or free GPU resources from sites like Google Colab.","title":"Frequently asked questions"},{"location":"quick_start/","text":"Install Seg2Link Install Anaconda or Miniconda Create a new conda environment with a custom name, such as seg2link-env , and activate it by running following commands in Anaconda PowerShell Prompt (Windows) or in terminal (macOS/Linux): $ conda create -n seg2link-env python=3.8 pip $ conda activate seg2link-env Install Seg2Link (hosted on PyPI ): (seg2link-env) $ pip install seg2link Use Seg2Link Data preparation Before performing segmentation, you must have at least the following data: A 3D cell image saved in a folder as a set of 2D Tiff images. A cellular/non-cellular prediction based on 1, saved in a different folder as 2D Tiff images. Launch Seg2Link Activate the created environment: $ conda activate seg2link-env Launch Seg2Link (seg2link-env) $ seg2link * Here we created and activated a custom environment called seg2link rather than seg2link-env . Choose a module Choose a proper module to perform: the semi-automatic segmentation (in Module Seg2D+Link ) or the comprehensive 3D inspection and corrections (in Module 3D correction )","title":"Quick start"},{"location":"quick_start/#install-seg2link","text":"Install Anaconda or Miniconda Create a new conda environment with a custom name, such as seg2link-env , and activate it by running following commands in Anaconda PowerShell Prompt (Windows) or in terminal (macOS/Linux): $ conda create -n seg2link-env python=3.8 pip $ conda activate seg2link-env Install Seg2Link (hosted on PyPI ): (seg2link-env) $ pip install seg2link","title":"Install Seg2Link"},{"location":"quick_start/#use-seg2link","text":"","title":"Use Seg2Link"},{"location":"quick_start/#data-preparation","text":"Before performing segmentation, you must have at least the following data: A 3D cell image saved in a folder as a set of 2D Tiff images. A cellular/non-cellular prediction based on 1, saved in a different folder as 2D Tiff images.","title":"Data preparation"},{"location":"quick_start/#launch-seg2link","text":"Activate the created environment: $ conda activate seg2link-env Launch Seg2Link (seg2link-env) $ seg2link * Here we created and activated a custom environment called seg2link rather than seg2link-env .","title":"Launch Seg2Link"},{"location":"quick_start/#choose-a-module","text":"Choose a proper module to perform: the semi-automatic segmentation (in Module Seg2D+Link ) or the comprehensive 3D inspection and corrections (in Module 3D correction )","title":"Choose a module"},{"location":"Round1/delete/","text":"Delete Delete a single cell Select a cell in Pick Mode . Press D to delete the selected cell. Delete multiple cells Select multiple cells and add them into the label list (See procedures 1 and 2 in Merge section) Press D to delete the cells in the label list. Note : To clean the label list before applying merge, press C .","title":"Delete cells"},{"location":"Round1/delete/#delete","text":"","title":"Delete"},{"location":"Round1/delete/#delete-a-single-cell","text":"Select a cell in Pick Mode . Press D to delete the selected cell.","title":"Delete a single cell"},{"location":"Round1/delete/#delete-multiple-cells","text":"Select multiple cells and add them into the label list (See procedures 1 and 2 in Merge section) Press D to delete the cells in the label list. Note : To clean the label list before applying merge, press C .","title":"Delete multiple cells"},{"location":"Round1/divide/","text":"Division Defination/Notes Current working slice : In Seg2D+Link Module, segmentation was generated and correctly sequentially. At a specific time point, the slice i and the previous slices have been segmented, while slices after i have not been processed yet. We define the slice i as the current working slice. Because of the special data structure used in Seg2D+Link Module, the Division and Division+Relink can only be applied to current working slice. Procedures Find a label that requires division, in the current working slice. If necessary, zoom in ( Space + Mouse scroll wheel ) to view the details. Select the tool Eraser by pressing E . Adjust the brush size. Then edit the cell boundary. Switch to the Picker Mode by pressing L . Click the cell to be divided. Then press K to divide the cell in the slice into multiple new cells. If neccesary, use other commands such as Merge and Delete to further modify the result.","title":"Divide a cell"},{"location":"Round1/divide/#division","text":"","title":"Division"},{"location":"Round1/divide/#definationnotes","text":"Current working slice : In Seg2D+Link Module, segmentation was generated and correctly sequentially. At a specific time point, the slice i and the previous slices have been segmented, while slices after i have not been processed yet. We define the slice i as the current working slice. Because of the special data structure used in Seg2D+Link Module, the Division and Division+Relink can only be applied to current working slice.","title":"Defination/Notes"},{"location":"Round1/divide/#procedures","text":"Find a label that requires division, in the current working slice. If necessary, zoom in ( Space + Mouse scroll wheel ) to view the details. Select the tool Eraser by pressing E . Adjust the brush size. Then edit the cell boundary. Switch to the Picker Mode by pressing L . Click the cell to be divided. Then press K to divide the cell in the slice into multiple new cells. If neccesary, use other commands such as Merge and Delete to further modify the result.","title":"Procedures"},{"location":"Round1/divide_relink/","text":"Division+Relink When a label has been corrected segmented in slice i but not in slice i+1, you can use Division+Relink to automatically link cells after Division, instead of apply Division and manually linking the results afterwards. Before operation: Slice 1: Slice 2: Correct the cell boundary in slice i+1 (See procedures 2 and 3 in Division ). Switch to the Picker Mode by pressing L . Click the cell to be divided and then press R . Now the cell in slice 2 has been divided and correctly linked to the cells in slice 1!","title":"Divide + Relink"},{"location":"Round1/divide_relink/#divisionrelink","text":"When a label has been corrected segmented in slice i but not in slice i+1, you can use Division+Relink to automatically link cells after Division, instead of apply Division and manually linking the results afterwards. Before operation: Slice 1: Slice 2: Correct the cell boundary in slice i+1 (See procedures 2 and 3 in Division ). Switch to the Picker Mode by pressing L . Click the cell to be divided and then press R . Now the cell in slice 2 has been divided and correctly linked to the cells in slice 1!","title":"Division+Relink"},{"location":"Round1/export/","text":"Export 3D segmentation result After you've finished the semi-automatic segmentations in all slices, press the button \"Export segmentation as .npy file\" to export the 3D segmentation as a 3D array file (.npy format).","title":"Export as 3D array"},{"location":"Round1/export/#export-3d-segmentation-result","text":"After you've finished the semi-automatic segmentations in all slices, press the button \"Export segmentation as .npy file\" to export the 3D segmentation as a 3D array file (.npy format).","title":"Export 3D segmentation result"},{"location":"Round1/merge/","text":"Merge cells In Pick Mode , click a cell with the left mouse button to select it. Then, press A to add the cell to the label list (in the States panel). Repeat step 1 to add more cells. Press M to merge the cells in the label list Note : To clean the label list before applying merge, press C .","title":"Merge cells"},{"location":"Round1/merge/#merge-cells","text":"In Pick Mode , click a cell with the left mouse button to select it. Then, press A to add the cell to the label list (in the States panel). Repeat step 1 to add more cells. Press M to merge the cells in the label list Note : To clean the label list before applying merge, press C .","title":"Merge cells"},{"location":"Round1/next/","text":"Next slice Correct all errors in current working slice i . Then you can go to the next slice i + 1 Before operation Slice 1 Press Shift + N Slice 2 Now the slice 2 has been automatically segmented and linked to slice 1.","title":"Next slice"},{"location":"Round1/next/#next-slice","text":"Correct all errors in current working slice i . Then you can go to the next slice i + 1 Before operation Slice 1 Press Shift + N Slice 2 Now the slice 2 has been automatically segmented and linked to slice 1.","title":"Next slice"},{"location":"Round1/panel_description/","text":"Panels description Panels 1. Layer controls This is a default panel in napari viewer for viewing/editing a label layer (segmentation layer). Here are some key features: Picker mode: You can select a label by clicking it with mouse. Press L to change to this mode. Pan/Zoom: You can hold space key and use left button/wheel of mouse to pan/zoom the image in Picker mode. Eraser: You can set a pixel as non-cell region (set the value to 0) with the eraser tool. Press E to change to this tool. Painter: You can paint a region with a specific label. Press P to change to this tool. Shuffle colors: Two neighboring cells can occasionally be assigned the same color. To shuffle the colors, press this button (top leftmost). 2. Layer list You can select a layer from segmentation, cell/non-cell image, raw image, etc., and can hide or change the opacity of them. 3. Tools for change the view point The most import function here is the \"home\" function (rightmost), which allows you to resize the image to see the entire image. 4. Current layer/cursor position/selected label This panel is not used in this module, but it is useful in Module 3D correction. 5. Canvas (Segmentation results) The segmentation results and other reference images are shown here. The slice number of the currently displayed one can be easily calculated using the information surrounding the slide bar. E.g, \"Slice(1-50)\" together with \"12|49\" indicate current slice number = 1 + 12 = 13. 6. States Three types of information are shown here: The size of the 3D image (based on the cell/non-cell image). The largest cell number in current segmentation result. The cached states that can be retrieved with undo/redo. 7. Hotkeys information The (default) hotkeys used in Seg2D+Link module. 8. Export Export the 3D segmentation result. 9. Current state information Show information of current state such like: Performing operation xxx...; Operation xxx was done; Warning message: xxx; etc. IMPORTANT : Always confirm the previous operation has been finished before starting the next operation.","title":"Panel description"},{"location":"Round1/panel_description/#panels-description","text":"","title":"Panels description"},{"location":"Round1/panel_description/#panels","text":"","title":"Panels"},{"location":"Round1/panel_description/#1-layer-controls","text":"This is a default panel in napari viewer for viewing/editing a label layer (segmentation layer). Here are some key features: Picker mode: You can select a label by clicking it with mouse. Press L to change to this mode. Pan/Zoom: You can hold space key and use left button/wheel of mouse to pan/zoom the image in Picker mode. Eraser: You can set a pixel as non-cell region (set the value to 0) with the eraser tool. Press E to change to this tool. Painter: You can paint a region with a specific label. Press P to change to this tool. Shuffle colors: Two neighboring cells can occasionally be assigned the same color. To shuffle the colors, press this button (top leftmost).","title":"1. Layer controls"},{"location":"Round1/panel_description/#2-layer-list","text":"You can select a layer from segmentation, cell/non-cell image, raw image, etc., and can hide or change the opacity of them.","title":"2. Layer list"},{"location":"Round1/panel_description/#3-tools-for-change-the-view-point","text":"The most import function here is the \"home\" function (rightmost), which allows you to resize the image to see the entire image.","title":"3. Tools for change the view point"},{"location":"Round1/panel_description/#4-current-layercursor-positionselected-label","text":"This panel is not used in this module, but it is useful in Module 3D correction.","title":"4. Current layer/cursor position/selected label"},{"location":"Round1/panel_description/#5-canvas-segmentation-results","text":"The segmentation results and other reference images are shown here. The slice number of the currently displayed one can be easily calculated using the information surrounding the slide bar. E.g, \"Slice(1-50)\" together with \"12|49\" indicate current slice number = 1 + 12 = 13.","title":"5. Canvas (Segmentation results)"},{"location":"Round1/panel_description/#6-states","text":"Three types of information are shown here: The size of the 3D image (based on the cell/non-cell image). The largest cell number in current segmentation result. The cached states that can be retrieved with undo/redo.","title":"6. States"},{"location":"Round1/panel_description/#7-hotkeys-information","text":"The (default) hotkeys used in Seg2D+Link module.","title":"7. Hotkeys information"},{"location":"Round1/panel_description/#8-export","text":"Export the 3D segmentation result.","title":"8. Export"},{"location":"Round1/panel_description/#9-current-state-information","text":"Show information of current state such like: Performing operation xxx...; Operation xxx was done; Warning message: xxx; etc. IMPORTANT : Always confirm the previous operation has been finished before starting the next operation.","title":"9. Current state information"},{"location":"Round1/parameter_setting/","text":"Specify images/parameters in Seg2D+Link Parameter panels 1. Paths of images/results Users should specify three folders: containing the cell/non-cell prediction images (2D Tiff images); containing the raw images (2D Tiff images); to store the segmentation results. 2. Parameters Users should specify following parameters: Slice number to be retrieved. Default value is the last slice that have been segmented. The segmentation results after the specified slice number will be deleted. If set it to 0, the program will restart the segmentation and remove all previous segmentation results. Value of the cell region. Set it according to the cell/non-cell images. The minimal overlap coefficient. This is a custom threshold used for linking cells across slices. Supposing there are two cells X and Y in two adjacent slices, their overlap coefficient = (Area(X \u2229 Y) / min(Area(Y), Area(Y)) If overlap(X, Y) > the threshold, cells X and Y will be linked. 3. Save/Load the paths/parameters Users can save the specified parameters in a .ini file and reload it later to avoid having to set the paths/parameters every time the software is launched. 4. Use Mask images This option allows users to segment cells in user-defined regions. When it is selected, the GUI will change as follows: Users should further specify following parameters: Fill holes. Force the program to automatically fill the holes in the user-defined regions. The calculation will take a long time when processing large image (but only once). Update cache of mask. The cache is a .npy file of the original/holes-filled mask image. It was created to avoid repeated calculations after launching the software. Check this option will force the program to re-make the cache file, which will take a long time. If it is not checked, the program will try to load the mask data from the existed cache file. Path for mask images. Specify the folder containing the mask images (2D Tiff images); Value of the mask region. Set this to the value of the user-defined region in mask images. The minimal overlap. This is a custom threshold for ignoring cells outside of the user-defined regions.. Assuming a cell A was partially located within the user-defined region, then the overlap = Area(A \u2229 (the user-defined region)) / Area(A) If overlap(A) < the threshold, Cell A will be removed from the segmentation result. 5. Warning information If the images or specified folders are not found, the warning information will be displayed here. 6. Start the Seg2D+Link Module Press this button to launch the Seg2D+Link module.","title":"Parameters description"},{"location":"Round1/parameter_setting/#specify-imagesparameters-in-seg2dlink","text":"","title":"Specify images/parameters in Seg2D+Link"},{"location":"Round1/parameter_setting/#parameter-panels","text":"","title":"Parameter panels"},{"location":"Round1/parameter_setting/#1-paths-of-imagesresults","text":"Users should specify three folders: containing the cell/non-cell prediction images (2D Tiff images); containing the raw images (2D Tiff images); to store the segmentation results.","title":"1. Paths of images/results"},{"location":"Round1/parameter_setting/#2-parameters","text":"Users should specify following parameters: Slice number to be retrieved. Default value is the last slice that have been segmented. The segmentation results after the specified slice number will be deleted. If set it to 0, the program will restart the segmentation and remove all previous segmentation results. Value of the cell region. Set it according to the cell/non-cell images. The minimal overlap coefficient. This is a custom threshold used for linking cells across slices. Supposing there are two cells X and Y in two adjacent slices, their overlap coefficient = (Area(X \u2229 Y) / min(Area(Y), Area(Y)) If overlap(X, Y) > the threshold, cells X and Y will be linked.","title":"2. Parameters"},{"location":"Round1/parameter_setting/#3-saveload-the-pathsparameters","text":"Users can save the specified parameters in a .ini file and reload it later to avoid having to set the paths/parameters every time the software is launched.","title":"3. Save/Load the paths/parameters"},{"location":"Round1/parameter_setting/#4-use-mask-images","text":"This option allows users to segment cells in user-defined regions. When it is selected, the GUI will change as follows: Users should further specify following parameters: Fill holes. Force the program to automatically fill the holes in the user-defined regions. The calculation will take a long time when processing large image (but only once). Update cache of mask. The cache is a .npy file of the original/holes-filled mask image. It was created to avoid repeated calculations after launching the software. Check this option will force the program to re-make the cache file, which will take a long time. If it is not checked, the program will try to load the mask data from the existed cache file. Path for mask images. Specify the folder containing the mask images (2D Tiff images); Value of the mask region. Set this to the value of the user-defined region in mask images. The minimal overlap. This is a custom threshold for ignoring cells outside of the user-defined regions.. Assuming a cell A was partially located within the user-defined region, then the overlap = Area(A \u2229 (the user-defined region)) / Area(A) If overlap(A) < the threshold, Cell A will be removed from the segmentation result.","title":"4. Use Mask images"},{"location":"Round1/parameter_setting/#5-warning-information","text":"If the images or specified folders are not found, the warning information will be displayed here.","title":"5. Warning information"},{"location":"Round1/parameter_setting/#6-start-the-seg2dlink-module","text":"Press this button to launch the Seg2D+Link module.","title":"6. Start the Seg2D+Link Module"},{"location":"Round1/start_r1/","text":"Workflow of round 1 Specify the images and the parameters ( Detailed instructions ) Launch the main window of Seg2D+Link ( Panel descriptions ) Perform semi-automatic segmentations with following procedures: Correct the segmentation in slice i with following operations: Merge / Delete / Division / Division-Relink . Generate automatic segmentation in the Next slice i . Note : The incorrect operations in 1 and 2 can be canceled with undo/redo (Press U or F ). Repeat 1 and 2 until all slices are segmented and linked. Export the segmentation as a .npy file.","title":"Workflow"},{"location":"Round1/start_r1/#workflow-of-round-1","text":"Specify the images and the parameters ( Detailed instructions ) Launch the main window of Seg2D+Link ( Panel descriptions ) Perform semi-automatic segmentations with following procedures: Correct the segmentation in slice i with following operations: Merge / Delete / Division / Division-Relink . Generate automatic segmentation in the Next slice i . Note : The incorrect operations in 1 and 2 can be canceled with undo/redo (Press U or F ). Repeat 1 and 2 until all slices are segmented and linked. Export the segmentation as a .npy file.","title":"Workflow of round 1"},{"location":"Round2/delete/","text":"Delete The procedure is completed the same as Delete in Round 1","title":"Delete cells"},{"location":"Round2/delete/#delete","text":"The procedure is completed the same as Delete in Round 1","title":"Delete"},{"location":"Round2/divide/","text":"Division (2D) Division The cell 76 in slice 1 should be divided into 3 cells. Choose 2D mode and max division = Inf . Click the cell 76 in Picker Mode . Then press K to divide it. The cell was over-segmented with 2D watershed algorithm. If necessary, correct the cell boundary before pressing K Correct the over-segmentation by Merge . Division+Relink The cell 76 in slice 2 should be divided similarly as in slice 1. Click the cell 76 in Picker Mode . Then press R to divide it and relink the results to slice 1. The over-segmentation was solved automatically by relinking. The cell 76 in slice 3. Similarly, press R solves everything.","title":"Divide / Division-Relink (2D)"},{"location":"Round2/divide/#division-2d","text":"","title":"Division (2D)"},{"location":"Round2/divide/#division","text":"The cell 76 in slice 1 should be divided into 3 cells. Choose 2D mode and max division = Inf . Click the cell 76 in Picker Mode . Then press K to divide it. The cell was over-segmented with 2D watershed algorithm. If necessary, correct the cell boundary before pressing K Correct the over-segmentation by Merge .","title":"Division"},{"location":"Round2/divide/#divisionrelink","text":"The cell 76 in slice 2 should be divided similarly as in slice 1. Click the cell 76 in Picker Mode . Then press R to divide it and relink the results to slice 1. The over-segmentation was solved automatically by relinking. The cell 76 in slice 3. Similarly, press R solves everything.","title":"Division+Relink"},{"location":"Round2/divide_3d/","text":"Division (3D) The division 3D divide a cell based on 3D connectivity. It should be used in following two cases: Incorrect merge of spatially separated cells The cell 2 should be divided into two cells due to the careless incorrect merge operation by the user. Choose 3D mode . Click the cell 2 in Picker Mode . Then press K to divide it. The cell was correctly divided into two cells. Divide two cells connected along z-axis Suppose we need to divide the cell 36 into two cells, with the slice 10 as boundary. Slice 9 Slice 10 Slice 11 Move to slice 10. Use bucket tool to fill the cell region with label 0 (i.e. as boundary) Go back to slice 9. Click cell 36. Press K in 3D mode. Slice 9 Slice 10 Slice 11 The cell 36 has been divided into two cells along z-axis!","title":"Divide a cell (3D)"},{"location":"Round2/divide_3d/#division-3d","text":"The division 3D divide a cell based on 3D connectivity. It should be used in following two cases:","title":"Division (3D)"},{"location":"Round2/divide_3d/#incorrect-merge-of-spatially-separated-cells","text":"The cell 2 should be divided into two cells due to the careless incorrect merge operation by the user. Choose 3D mode . Click the cell 2 in Picker Mode . Then press K to divide it. The cell was correctly divided into two cells.","title":"Incorrect merge of spatially separated cells"},{"location":"Round2/divide_3d/#divide-two-cells-connected-along-z-axis","text":"Suppose we need to divide the cell 36 into two cells, with the slice 10 as boundary. Slice 9 Slice 10 Slice 11 Move to slice 10. Use bucket tool to fill the cell region with label 0 (i.e. as boundary) Go back to slice 9. Click cell 36. Press K in 3D mode. Slice 9 Slice 10 Slice 11 The cell 36 has been divided into two cells along z-axis!","title":"Divide two cells connected along z-axis"},{"location":"Round2/insert/","text":"Insert a cell Suppose you want to paint a new cell in the background region. Press I . The program will automatically switch to the Painter mode and create a new label, 571. Draw with the painter. Similarly, move to slice 2. And draw with the painter.","title":"Insert a cell"},{"location":"Round2/insert/#insert-a-cell","text":"Suppose you want to paint a new cell in the background region. Press I . The program will automatically switch to the Painter mode and create a new label, 571. Draw with the painter. Similarly, move to slice 2. And draw with the painter.","title":"Insert a cell"},{"location":"Round2/localize/","text":"Localize a cell The example of the segmentation here has been performed sort + remove tiny cells . Currently selected label = 1 (the largest cell). Press the button Locate . The view jumps to the slice of the cell center Press Q to view the select label. The [x, y] coordinates of the cell center can be found after the Locate button. The [x, y, z] coordinates of the cursor can be found at left-bottom. This function helps users to find tiny cells. You can check another cell by modify the Select label and press Locate again. Cell 2 is localized To view all cells, press Q again.","title":"Localize a cell"},{"location":"Round2/localize/#localize-a-cell","text":"The example of the segmentation here has been performed sort + remove tiny cells . Currently selected label = 1 (the largest cell). Press the button Locate . The view jumps to the slice of the cell center Press Q to view the select label. The [x, y] coordinates of the cell center can be found after the Locate button. The [x, y, z] coordinates of the cursor can be found at left-bottom. This function helps users to find tiny cells. You can check another cell by modify the Select label and press Locate again. Cell 2 is localized To view all cells, press Q again.","title":"Localize a cell"},{"location":"Round2/merge/","text":"Merge cells The procedure is completed the same as Merge in Round 1","title":"Merge cells"},{"location":"Round2/merge/#merge-cells","text":"The procedure is completed the same as Merge in Round 1","title":"Merge cells"},{"location":"Round2/panel_description/","text":"Panels description Panels Panels 1, 2, 3, 5, 7, and 9 See descriptions of in round 1 . 4. Current layer [cursor position] selected label Together with the Localize function, the cursor position can assist users in locating a cell. 6. States Four types of information/functions are supplied here: The largest cell number in current segmentation result. The cached states that can be retrieved with undo/redo. Select a cell ID and locate its position. See Localize The contents of the label list, used in Merge and Delete 8. Divide a single cell Mode 2D: Divide / Divide-Relink a cell in a specific slice. 3D: Divide a cell in 3D space . Max division Only used in 2D mode . The max number of cells allowed in the division result. If more cells are obtained, smaller cells will be merged with nearby cells. Inf means no limitation of the cell number. Divide cell Show information of division result. Check it Select a cell in the division result and jump to the slice of its center. 10. Save/Export Save segmentation Save: Save the current result as seg-modified.npy. Save as: Save the current result with a custom filename. Load segmentation Load the segmentation result saved as npy format. Sort labels and remove tiny cells Export segmentation as .tiff files","title":"Panel description"},{"location":"Round2/panel_description/#panels-description","text":"","title":"Panels description"},{"location":"Round2/panel_description/#panels","text":"","title":"Panels"},{"location":"Round2/panel_description/#panels-1-2-3-5-7-and-9","text":"See descriptions of in round 1 .","title":"Panels 1, 2, 3, 5, 7, and 9"},{"location":"Round2/panel_description/#4-current-layer-cursor-position-selected-label","text":"Together with the Localize function, the cursor position can assist users in locating a cell.","title":"4. Current layer [cursor position] selected label"},{"location":"Round2/panel_description/#6-states","text":"Four types of information/functions are supplied here: The largest cell number in current segmentation result. The cached states that can be retrieved with undo/redo. Select a cell ID and locate its position. See Localize The contents of the label list, used in Merge and Delete","title":"6. States"},{"location":"Round2/panel_description/#8-divide-a-single-cell","text":"Mode 2D: Divide / Divide-Relink a cell in a specific slice. 3D: Divide a cell in 3D space . Max division Only used in 2D mode . The max number of cells allowed in the division result. If more cells are obtained, smaller cells will be merged with nearby cells. Inf means no limitation of the cell number. Divide cell Show information of division result. Check it Select a cell in the division result and jump to the slice of its center.","title":"8. Divide a single cell"},{"location":"Round2/panel_description/#10-saveexport","text":"Save segmentation Save: Save the current result as seg-modified.npy. Save as: Save the current result with a custom filename. Load segmentation Load the segmentation result saved as npy format. Sort labels and remove tiny cells Export segmentation as .tiff files","title":"10. Save/Export"},{"location":"Round2/parameter_setting/","text":"Specify images/parameters in 3D correction Parameter panels 1. Paths of images/results Users should specify three folders: containing the cell/non-cell prediction images (2D Tiff images); containing the raw images (2D Tiff images); to store the segmentation results. 2. Parameters Users should specify following parameters: Slice number to be retrieved. Default value is the last slice that have been segmented. The segmentation results after the specified slice number will be deleted. If set it to 0, the program will restart the segmentation and remove all previous segmentation results. Value of the cell region. Set it according to the cell/non-cell images. The minimal overlap coefficient. This is a custom threshold used for linking cells across slices. Supposing there are two cells X and Y in two adjacent slices, their overlap coefficient = (Area(X \u2229 Y) / min(Area(Y), Area(Y)) If overlap(X, Y) > the threshold, cells X and Y will be linked. 3. Save/Load the paths/parameters Users can load the same .ini file used for the Seg2D+Link module. Users can save the specified parameters in a .ini file and reload it later to avoid having to set the paths/parameters every time the software is launched. 4. Use Mask images This option allows users to segment cells in user-defined regions. When it is selected, the GUI will change as follows: Users should further specify following parameters: Fill holes. Force the program to automatically fill the holes in the user-defined regions. The calculation will take a long time when processing large image (but only once). Update cache of mask. The cache is a .npy file of the original/holes-filled mask image. It was created to avoid repeated calculations after launching the software. Check this option will force the program to re-make the cache file, which will take a long time. If it is not checked, the program will try to load the mask data from the existed cache file. Path for mask images. Specify the folder containing the mask images (2D Tiff images); Value of the mask region. Set this to the value of the user-defined region in mask images. The minimal overlap. This is a custom threshold for ignoring cells outside of the user-defined regions.. Assuming a cell A was partially located within the user-defined region, then the overlap = Area(A \u2229 (the user-defined region)) / Area(A) If overlap(A) < the threshold, Cell A will be removed from the segmentation result. 5. Warning information If the images or specified folders are not found, the warning information will be displayed here. 6. Start the Seg2D+Link Module Press this button to launch the Seg2D+Link module.","title":"Parameters description"},{"location":"Round2/parameter_setting/#specify-imagesparameters-in-3d-correction","text":"","title":"Specify images/parameters in 3D correction"},{"location":"Round2/parameter_setting/#parameter-panels","text":"","title":"Parameter panels"},{"location":"Round2/parameter_setting/#1-paths-of-imagesresults","text":"Users should specify three folders: containing the cell/non-cell prediction images (2D Tiff images); containing the raw images (2D Tiff images); to store the segmentation results.","title":"1. Paths of images/results"},{"location":"Round2/parameter_setting/#2-parameters","text":"Users should specify following parameters: Slice number to be retrieved. Default value is the last slice that have been segmented. The segmentation results after the specified slice number will be deleted. If set it to 0, the program will restart the segmentation and remove all previous segmentation results. Value of the cell region. Set it according to the cell/non-cell images. The minimal overlap coefficient. This is a custom threshold used for linking cells across slices. Supposing there are two cells X and Y in two adjacent slices, their overlap coefficient = (Area(X \u2229 Y) / min(Area(Y), Area(Y)) If overlap(X, Y) > the threshold, cells X and Y will be linked.","title":"2. Parameters"},{"location":"Round2/parameter_setting/#3-saveload-the-pathsparameters","text":"Users can load the same .ini file used for the Seg2D+Link module. Users can save the specified parameters in a .ini file and reload it later to avoid having to set the paths/parameters every time the software is launched.","title":"3. Save/Load the paths/parameters"},{"location":"Round2/parameter_setting/#4-use-mask-images","text":"This option allows users to segment cells in user-defined regions. When it is selected, the GUI will change as follows: Users should further specify following parameters: Fill holes. Force the program to automatically fill the holes in the user-defined regions. The calculation will take a long time when processing large image (but only once). Update cache of mask. The cache is a .npy file of the original/holes-filled mask image. It was created to avoid repeated calculations after launching the software. Check this option will force the program to re-make the cache file, which will take a long time. If it is not checked, the program will try to load the mask data from the existed cache file. Path for mask images. Specify the folder containing the mask images (2D Tiff images); Value of the mask region. Set this to the value of the user-defined region in mask images. The minimal overlap. This is a custom threshold for ignoring cells outside of the user-defined regions.. Assuming a cell A was partially located within the user-defined region, then the overlap = Area(A \u2229 (the user-defined region)) / Area(A) If overlap(A) < the threshold, Cell A will be removed from the segmentation result.","title":"4. Use Mask images"},{"location":"Round2/parameter_setting/#5-warning-information","text":"If the images or specified folders are not found, the warning information will be displayed here.","title":"5. Warning information"},{"location":"Round2/parameter_setting/#6-start-the-seg2dlink-module","text":"Press this button to launch the Seg2D+Link module.","title":"6. Start the Seg2D+Link Module"},{"location":"Round2/save_load_export/","text":"Save/Load/Export Save/Load Because saving the temporal result is time-consuming in 3D correction, the program does not save it automatically. Save When you have finished a certain number of corrections in the 3D correction module, press the Save button. The program will save the current result as \"seg-modified.npy.\" Save as When you need to save the segmentation with a different filename, click the Save as button Load When you need to load a segmentation result saved previously, click the Load segmentation button and choose the file you need. Export To export the result, click the Export button and then select a folder. The program will create a sub-folder called \"seg-tiff\" in which the exported 2D Tiff images will be saved.","title":"Save/Load/Export"},{"location":"Round2/save_load_export/#saveloadexport","text":"","title":"Save/Load/Export"},{"location":"Round2/save_load_export/#saveload","text":"Because saving the temporal result is time-consuming in 3D correction, the program does not save it automatically.","title":"Save/Load"},{"location":"Round2/save_load_export/#save","text":"When you have finished a certain number of corrections in the 3D correction module, press the Save button. The program will save the current result as \"seg-modified.npy.\"","title":"Save"},{"location":"Round2/save_load_export/#save-as","text":"When you need to save the segmentation with a different filename, click the Save as button","title":"Save as"},{"location":"Round2/save_load_export/#load","text":"When you need to load a segmentation result saved previously, click the Load segmentation button and choose the file you need.","title":"Load"},{"location":"Round2/save_load_export/#export","text":"To export the result, click the Export button and then select a folder. The program will create a sub-folder called \"seg-tiff\" in which the exported 2D Tiff images will be saved.","title":"Export"},{"location":"Round2/sort_remove/","text":"Sort and remove tiny cells Sort cells Press the button \"Sort labels and remove tiny cells\". Do not adjust the slide bar \"Max cell number\", unless you want to remove tiny cells . Press the button \"Save the sorted cells (.npy)\". The labels have been sorted according to their sizes!! Remove tiny cells Press the button \"Sort labels and remove tiny cells\", and adjust the \"Max cell number\". The cells < 63 voxels will be removed! Press the button \"Save the sorted cells (.npy)\". Only 300 sorted larger cells were kept!! You can inspect these larger cells with Localization Notes: How to go back After applying sorting/removing operation, the cache of the actions will be reset. Users cannot use undo/redo to cancel the operation. The segmentations before/after the operation are automatically saved as two files: seg-modified_before_sort_remove.npy seg-modified_after_sort_remove.npy If users are unsatisfied with the result, retrieve the previous state with Load function.","title":"Sort and remove tiny cells"},{"location":"Round2/sort_remove/#sort-and-remove-tiny-cells","text":"","title":"Sort and remove tiny cells"},{"location":"Round2/sort_remove/#sort-cells","text":"Press the button \"Sort labels and remove tiny cells\". Do not adjust the slide bar \"Max cell number\", unless you want to remove tiny cells . Press the button \"Save the sorted cells (.npy)\". The labels have been sorted according to their sizes!!","title":"Sort cells"},{"location":"Round2/sort_remove/#remove-tiny-cells","text":"Press the button \"Sort labels and remove tiny cells\", and adjust the \"Max cell number\". The cells < 63 voxels will be removed! Press the button \"Save the sorted cells (.npy)\". Only 300 sorted larger cells were kept!! You can inspect these larger cells with Localization","title":"Remove tiny cells"},{"location":"Round2/sort_remove/#notes-how-to-go-back","text":"After applying sorting/removing operation, the cache of the actions will be reset. Users cannot use undo/redo to cancel the operation. The segmentations before/after the operation are automatically saved as two files: seg-modified_before_sort_remove.npy seg-modified_after_sort_remove.npy If users are unsatisfied with the result, retrieve the previous state with Load function.","title":"Notes: How to go back"},{"location":"Round2/start_r2/","text":"Workflow of round 2 Specify the images and the parameters ( Detailed instructions ) Launch the main window of Seg2D+Link ( Panel descriptions ) Perform inspections and corrections with following operations: Localize to a cell. Correct the segmentation in slice i with following operations: Merge / Delete / Division / Division-Relink / 3D Division / Insert Sort cells by sizes and Remove tiny cells . Save and load intermediate segmentation results. Export the segmentation as 2D Tiff images.","title":"Start round 2"},{"location":"Round2/start_r2/#workflow-of-round-2","text":"Specify the images and the parameters ( Detailed instructions ) Launch the main window of Seg2D+Link ( Panel descriptions ) Perform inspections and corrections with following operations: Localize to a cell. Correct the segmentation in slice i with following operations: Merge / Delete / Division / Division-Relink / 3D Division / Insert Sort cells by sizes and Remove tiny cells . Save and load intermediate segmentation results. Export the segmentation as 2D Tiff images.","title":"Workflow of round 2"}]}